<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-temperament" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Pythagorean Scales and Equal Temperament</title>

  <p> 
    Because of the critical role played by octaves and fifths, many ancient cultures developed musical scales generated by those intervals.
    However, it is important to note that there are an incredible diversity of musical scales that have been developed and used throughout the world, see for example the book <url href="https://link.springer.com/book/10.1007/b138848">Tuning, Timbre, Spectrum, Scale</url> by William A. Sethares. 
  </p>
  <p>
    A scale is called <m>Pythagorean</m> if it is generated by octaves and fifths.
    As we will see, the Fundamental Theorem of Arithmetic forces such scales to have inherent dissonance, because of the answer to the following question.
  </p>

  <assumption xml:id="assumption-octavesandfifths">
    <statement>
      <p>
        If you start at a fundamental frequency and go up by fifths, do you ever reach a frequency that is an equivalent note to the one you started with?
      </p>
      <p>
        Equivalently, suppose we start with a fundamental frequency <m>f</m> and we consider the sequence of octaves <m>2^af</m> for <m>a\geq 1</m> and fifths <m>(3/2)^bf</m> for <m>b\geq 1</m>.
        Are there values of <m>a</m> and <m>b</m> that produce the same frequency?
      </p>
    </statement>
  </assumption>

  <exercise>
    <p>
      With your group, explore this question.
    </p>
  </exercise>

  <theorem xml:id="thm-fifthoctaveissue">
    <statement>
      <p>
        The frequencies generated from a fundamental by going up by fifths are never equivalent notes to the original frequency. 
        In other words, there are no integer values of <m>a</m> and <m>b</m> such that <m>2^af=(3/2)^bf</m>.
      </p>
    </statement>
  </theorem>

  <proof>
    <p>
      Suppose for a contradiction that such values did exist.
      This would imply the following:
      <md>
        <mrow>2^af \amp = (3/2)^bf \implies </mrow>
        <mrow> 2^a \amp = (3/2)^b \implies </mrow>
        <mrow> a \amp = \log_2((3/2)^b) = b\log_2(3/2) \implies </mrow>
        <mrow>a/b \amp = \log_2(3/2) \, .</mrow>
      </md>
      Thus, we would have that <m>\log_2(3/2)=a/b</m>, which would imply that <m>\log_2(3/2)</m> is rational.
      However, we proved that this value is irrational in <xref ref="thm-log32irrational"/> using the Fundamental Theorem of Arithmetic, which is a contradiction.
    </p>
  </proof>

  <exercise>
    <p>
      Discuss this proof with your group.
      Does it make sense? Why or why not?
    </p>
  </exercise>
  
  <p>
    This theorem has significant implications for music theory, because it implies that if we keep going up by fifths, we produce infinitely many different frequencies that are not equivalent by octaves.
    Thus, Pythagorean scales would either have to contain an infinite number of frequencies within a fixed octave, or else people would have to choose to include only some of the frequencies generated by going up by fifths (which is what was traditionally done).
    This inherent limitation of Pythagorean scales led to an extensive development of scales and tuning in the Western European musical tradition.
  </p>

  <p>
    On a piano keyboard, there are twelve notes that repeat in each octave (one note for each key).
  </p>

  <figure xml:id="fig-keyboard">
    <caption>An image of a musical keyboard originally at <url href="https://commons.wikimedia.org/wiki/File:Piano-full-en.svg">this link</url>.</caption>
    <image source="Piano-full-en.svg.png">
      <shortdescription>An image of a musical keyboard.</shortdescription>
    </image>
  </figure>

  <p>
    Why does Western European music traditionally use twelve notes in each octave?
    The answer comes from the fact that going up by twelve fifth intervals results in a frequency that is very close to going up by seven octaves:
    <md>
      <mrow>(3/2)^{12} = 129.74633789\ldots \approx 128 = 2^7 \, .</mrow>
    </md>
    Equivalently, 
    <me>
      \log_2(3/2) = 0.58496250072\ldots \approx 0.5833333\ldots = 7/12 \, .
    </me>
    This means that if we go up by fifths twelve times, we reach a frequency that is approximately seven octaves above the original frequency.
    Thus, by using twelve notes in each octave, we can approximate the Pythagorean scale while still having a finite number of notes.
  </p>

  <exercise>
    <p>
      Discuss the approximations above.
      Does it make sense why this motivated dividing the octave into twelve frequencies?
      If not, what questions do you have?
    </p>
  </exercise>

  <p>
    This observation led to extensive development of different types of tuning/temperament, such as just intonation, meantone temperament, and well temperament, before the widespread adoption of equal temperament in the 19th century.
    What is done in <em>equal temperament</em> is to use a 12-note scale that spaces the frequencies completely evenly, meaning that the interval between any two consecutive frequencies is the same.
  </p>
    <p>
    Mathematically, this is done by using a scaling factor <m>x</m> to generate the scale with frequencies
    <md>
      <mrow>f, xf, x^2f, x^3f, x^4f, \ldots, x^{11}f, x^{12}f=2f\, .</mrow>
    </md>
    The question arises: what value of <m>x</m> should be used?
    From the above line, we see that we need <m>x^{12}=2</m>, so the appropriate value is <m>x=2^{1/12}=\sqrt[12]{2}</m>.
  </p>

  <p>
    We proved in <xref ref="ex-twelfthtwo"/> that <m>2^{1/12}</m> is irrational.
    Thus, the intervals in equal temperament are irrational multiples of the fundamental frequency, and therefore they do not line up exactly with the naturally occurring harmonics of a vibrating string.
    For example, if we start with a fundamental frequency of <m>f=440</m> Hz (the concert "A" pitch), then the fifth in equal temperament is at frequency 
    <me>440\cdot 2^{7/12} \approx 659.255113825 \, \mathrm{Hz} \, ,</me>
    which is slightly off from the perfect fifth at <m>660</m> Hz.
  </p>

  <p>
    Thus, there is a trade-off that has been accepted in the musical tradition of Western Europe: by using equal temperament, we gain the ability to play in any key and have a consistent sound across all keys and across multiple octaves, at the cost of having intervals that are not perfectly in tune with the natural harmonics of a vibrating string.
    These compromises arise due to number theoretic properties of rational and irrational numbers, specifically due to the Fundamental Theorem of Arithmetic preventing sequences of fifths and octaves from aligning.
  </p>

  <p>
    As a final activity, let's listen to a C major scale being played in three different tunings/temperaments: equally tempered, Pythagorean tuning, and just tuning.
    See if you can hear a difference among these scales:
    <ol>
      <li>
        <p>
          Equal tempered C major scale: <url href="https://upload.wikimedia.org/wikipedia/commons/transcoded/3/31/Diatonic_scale_on_C.mid/Diatonic_scale_on_C.mid.mp3">https://upload.wikimedia.org/wikipedia/commons/transcoded/3/31/Diatonic_scale_on_C.mid/Diatonic_scale_on_C.mid.mp3</url>
        </p>
      </li>
      <li>
        <p>
          Pythagorean tuning C major scale: <url href="https://upload.wikimedia.org/wikipedia/commons/transcoded/d/dc/Pythagorean_diatonic_scale_on_C.mid/Pythagorean_diatonic_scale_on_C.mid.mp3">https://upload.wikimedia.org/wikipedia/commons/transcoded/d/dc/Pythagorean_diatonic_scale_on_C.mid/Pythagorean_diatonic_scale_on_C.mid.mp3</url>
        </p>
      </li>
      <li>
        <p>
          Just tuning C major scale: <url href="https://upload.wikimedia.org/wikipedia/commons/transcoded/a/a1/Just_diatonic_scale_on_C.mid/Just_diatonic_scale_on_C.mid.mp3">https://upload.wikimedia.org/wikipedia/commons/transcoded/a/a1/Just_diatonic_scale_on_C.mid/Just_diatonic_scale_on_C.mid.mp3</url>
        </p>
      </li>
    </ol>

    Can you hear any differences?
  </p>



</section>